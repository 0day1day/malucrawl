import clamd
import requests

clamd_socket = clamd.ClamdUnixSocket()


def scan_html(url):
    """
    todo: should crawl the page, using lxml then scan each page's content
    """
    return clamd_socket.scan_stream(requests.get(url, timeout=10.0).content)

if __name__ == "__main__":
    print scan_html("https://secure.eicar.org/eicar.com")
