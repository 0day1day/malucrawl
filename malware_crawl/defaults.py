import redis
from django.conf import settings

import requests

redis_urls = {
    "slave": "redis://localhost:6379/0",
    "master": "redis://localhost:6379/0"
}

redis_urls.update(
    getattr(settings, "MALUCRAWL_REDIS", {}).items()
)

redis_db = {
    "slave": redis.Redis.from_url(redis_urls["slave"]),
    "master": redis.Redis.from_url(redis_urls["master"])
}

REQUESTS_SESSIONS = {
    "api": requests.Session(),
    "probe": requests.Session()
}

REQUESTS_SESSIONS["api"].headers["User-Agent"] += " +http://git.io/cso_malucrawl"

REQUESTS_SESSIONS.update(
    getattr(settings, "REQUESTS_SESSIONS", {})
)
