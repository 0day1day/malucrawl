import redis
from django.conf import settings

import requests

redis_urls = {
    "slave": "redis://localhost:6379/0",
    "master": "redis://localhost:6379/0"
}

redis_urls.update(
    getattr(settings, "MALUCRAWL_REDIS", {}).items()
)

redis_db = {
    "slave": redis.Redis.from_url(redis_urls["slave"]),
    "master": redis.Redis.from_url(redis_urls["master"])
}

REQUESTS_SESSIONS = {
    "api": requests.Session(),
    "probe": requests.Session()
}

REQUESTS_SESSIONS["api"].headers["User-Agent"] += " +http://git.io/cso_malucrawl"
REQUESTS_SESSIONS["probe"].headers["User-Agent"] = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; InfoPath.2; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; MS-RTC LM 8; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"

REQUESTS_SESSIONS.update(
    getattr(settings, "REQUESTS_SESSIONS", {})
)
